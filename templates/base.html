<!DOCTYPE html>
<html lang="en"> {# Sets language for the page #}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {# Dynamic title based on child template #}
    <title>{% block title %}Financial Analysis Dashboard{% endblock %}</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Custom CSS -->
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style.css') }}">

    {# --- Charting Libraries --- #}
    {# Include Chart.js library first #}
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js" integrity="sha256-QHpBzWIJz1BnmEy42+f74yUaA/MvWb/n/S/4l/K/sIA=" crossorigin="anonymous"></script>
    {# Include Luxon for time scale adapter #}
    <script src="https://cdn.jsdelivr.net/npm/luxon@3.4.4/build/global/luxon.min.js" integrity="sha256-7+/XRErRl/cLIZnAXQ1Mif+SifNDT77y/2j5Hw96dXA=" crossorigin="anonymous"></script>
    {# Include Chart.js Adapter for Luxon #}
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1.3.1/dist/chartjs-adapter-luxon.min.js" integrity="sha256-CvLUOCHBLSRLpi+Zg4XMPdLxBYh8GkcfG+fPBpBCl5E=" crossorigin="anonymous"></script>
    {# Include Chart.js Financial Plugin (for Candlestick charts) #}
    <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-financial@0.1.1/dist/chartjs-chart-financial.min.js" integrity="sha256-/kTSmHf5/H/IE+Bv75uQVXDvW8ep/8KMIc9EAr4yT7Y=" crossorigin="anonymous"></script>
    {# Include Plotly.js (for Forecast charts) #}
    <script src='https://cdn.plot.ly/plotly-latest.min.js'></script> {# Using latest Plotly #}

    {# Block for any extra head elements required by child templates #}
    {% block head_extra %}{% endblock %}
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar Column -->
            <div class="col-lg-2 col-md-3 sidebar px-0 d-none d-md-flex flex-column"> {# Hide sidebar on small screens, ensure flex column #}
                 {# Sidebar content included here #}
                 {% include 'partials/_sidebar.html' %}
            </div>

            <!-- Main Content Column -->
            <div class="col-lg-10 col-md-9 main-content ms-sm-auto"> {# Adjust margin for fixed sidebar #}
                 {# --- Flash Messages Container --- #}
                 {# Positioned via CSS, included here for structure #}
                 {% include 'partials/_flash_messages.html' %}

                 {# --- Main Content Block --- #}
                 {# Child templates (like index.html) fill this block #}
                 {% block content %}
                 <!-- Default content if block is empty -->
                 <p>Please select a stock.</p>
                 {% endblock %}
            </div>
        </div>
    </div>

    {# --- Page Bottom Scripts --- #}
    <!-- Bootstrap JS Bundle (includes Popper) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <!-- jQuery (if needed by other scripts or Bootstrap components, though BS5 often doesn't require it) -->
    {# <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script> #}

    <!-- Custom JS Files -->
    {# Load general utilities/main script first #}
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    {# Load script for overview charts #}
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    {# Load script for forecast charts #}
    <script src="{{ url_for('static', filename='js/forecast.js') }}"></script>

    <!-- Page-Specific Scripts Block -->
    {# Child templates (like index.html) fill this block for their specific JS needs (e.g., data initialization) #}
    {% block scripts %}{% endblock %}

</body>
</html>